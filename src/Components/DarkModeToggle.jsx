import { useState, useEffect } from "react";

function DarkModeToggle({ id }) {
  const [darkMode, setDarkMode] = useState(false);

  useEffect(() => {
    const darkModeEnabled = localStorage.getItem("darkMode") === "true";
    setDarkMode(darkModeEnabled);
    toggleDarkMode(darkModeEnabled);
    // eslint-disable-next-line react-hooks/exhaustive-deps
  }, []);

  const toggleDarkMode = (value) => {
    const newValue = value !== undefined ? value : !darkMode;
    document.documentElement.classList.toggle("dark", newValue);
    setDarkMode(newValue);
    localStorage.setItem("darkMode", newValue);
  };

  return (
    <button
      id={id}
      className="rounded-full bg-gray-200 p-1 dark:bg-gray-800"
      onClick={() => toggleDarkMode()}
    >
      {darkMode ? (
        <svg
          xmlns="http://www.w3.org/2000/svg"
          data-name="Layer 1"
          viewBox="0 0 168 168"
          id="moon"
          className="h-6 w-6 text-gray-400"
        >
          <path
            fill="#c1c5c8"
            d="m116.45 81.706 6.247 2.453 1.476 6.423c.424 1.841 1.38 2.802 2.524 2.802a3.755 3.755 0 0 0 2.68-1.572l4.312-5.055 6.7.61q.337.031.645.031c2.835 0 3.816-1.91 2.159-4.49l-3.58-5.575 2.663-6.05c1.11-2.514.196-4.176-2.037-4.176a6.025 6.025 0 0 0-1.432.19l-6.526 1.61-5.054-4.347a4.129 4.129 0 0 0-2.57-1.176c-1.3 0-2.235 1.115-2.377 3.173l-.453 6.57-5.787 3.36c-2.873 1.666-2.689 4.003.41 5.219zm.594-3.49 5.787-3.36.919-.532.072-1.059.453-6.57a2.336 2.336 0 0 1 .36-1.309.097.097 0 0 1 .022-.002c.048 0 .484.02 1.266.693l5.054 4.347.782.672 1.001-.247 6.527-1.61a4.046 4.046 0 0 1 .952-.132 1.265 1.265 0 0 1 .496.074 2.37 2.37 0 0 1-.289 1.297l-2.664 6.05-.433.982.58.905 3.581 5.574a2.43 2.43 0 0 1 .49 1.234 2.005 2.005 0 0 1-.966.175 4.83 4.83 0 0 1-.463-.022l-6.7-.61-1.031-.095-.672.789-4.313 5.053a2.372 2.372 0 0 1-1.137.877c-.072-.035-.387-.35-.595-1.256l-1.476-6.423-.237-1.028-.982-.386-6.247-2.454a2.611 2.611 0 0 1-1.167-.735 2.595 2.595 0 0 1 1.03-.892zm3.753-36.395 4.582 1.798 1.082 4.71c.31 1.35 1.012 2.055 1.852 2.055a2.752 2.752 0 0 0 1.963-1.151l3.164-3.707 4.912.445c.166.016.325.023.476.023 2.078 0 2.795-1.402 1.58-3.292l-2.626-4.087 1.955-4.437c.812-1.844.143-3.063-1.495-3.063a4.406 4.406 0 0 0-1.05.14l-4.786 1.18-3.706-3.188a3.031 3.031 0 0 0-1.885-.863c-.954 0-1.64.818-1.743 2.327l-.332 4.819-4.244 2.464c-2.106 1.221-1.971 2.935.3 3.827zm.703-2.098 4.244-2.464.919-.533.073-1.059.331-4.818a2.805 2.805 0 0 1 .038-.308 2.975 2.975 0 0 1 .29.221l3.706 3.189.782.673 1.002-.248 4.788-1.18a3.057 3.057 0 0 1 .328-.064c-.024.07-.055.15-.094.24l-1.955 4.436-.433.983.58.905 2.627 4.087c.05.078.091.148.124.21h-.022a3.15 3.15 0 0 1-.295-.014l-4.913-.445-1.03-.093-.672.787-3.162 3.705a2.75 2.75 0 0 1-.254.264 2.755 2.755 0 0 1-.092-.317l-1.082-4.71-.237-1.028-.982-.385-4.582-1.798a3.362 3.362 0 0 1-.237-.104c.06-.041.129-.085.21-.132zM87.47 58.377l3.749 1.472.886 3.854c.254 1.105.828 1.681 1.515 1.681a2.25 2.25 0 0 0 1.606-.942l2.588-3.033 4.02.366c.135.013.264.018.388.018 1.701 0 2.288-1.147 1.294-2.694l-2.149-3.344 1.599-3.63c.666-1.51.118-2.506-1.223-2.506a3.625 3.625 0 0 0-.859.114l-3.915.966-3.032-2.61a2.477 2.477 0 0 0-1.542-.705c-.78 0-1.342.67-1.426 1.905l-.272 3.941-3.473 2.017c-1.723 1-1.613 2.401.246 3.13zM91.7 54.96l.918-.533.073-1.058.241-3.503 2.731 2.35.782.672 1.002-.247 3.484-.86-1.395 3.17-.433.982.58.904 1.867 2.905-3.555-.325-1.031-.093-.672.788-2.333 2.733-.792-3.443-.236-1.028-.982-.385-3.26-1.28zM131 23a3 3 0 1 0-3-3 3.003 3.003 0 0 0 3 3zm0-4.5a1.5 1.5 0 1 1-1.5 1.5 1.501 1.501 0 0 1 1.5-1.5zM71 8a3 3 0 1 0-3-3 3.003 3.003 0 0 0 3 3zm0-4.5A1.5 1.5 0 1 1 69.5 5 1.501 1.501 0 0 1 71 3.5zM157 88a2 2 0 1 0-2 2 2.002 2.002 0 0 0 2-2zm-3 0a1 1 0 1 1 1 1 1.001 1.001 0 0 1-1-1zM89 29a2 2 0 1 0-2-2 2.002 2.002 0 0 0 2 2zm0-3a1 1 0 1 1-1 1 1.001 1.001 0 0 1 1-1zm19-14a2 2 0 1 0-2-2 2.002 2.002 0 0 0 2 2zm0-3a1 1 0 1 1-1 1 1.001 1.001 0 0 1 1-1zM30 45a2 2 0 1 0-2-2 2.002 2.002 0 0 0 2 2zm0-3a1 1 0 1 1-1 1 1.001 1.001 0 0 1 1-1z"
          ></path>
          <circle cx="2" cy="146" r="2" fill="#c1c5c8"></circle>
          <path
            fill="#c1c5c8"
            d="M11 144H8a2 2 0 0 0 0 4h3a2 2 0 0 0 0-4zm149 0h-3a2 2 0 0 0 0 4h3a2 2 0 0 0 0-4z"
          ></path>
          <circle cx="166" cy="146" r="2" fill="#c1c5c8"></circle>
          <path
            fill="#c1c5c8"
            d="M150.721 144h-42.174a64.18 64.18 0 0 0 31.155-22.983c2.299-3.154 1.2-5.191-2.1-5.191a10.032 10.032 0 0 0-1.421.108 60.153 60.153 0 0 1-68.652-59.802 60.251 60.251 0 0 1 8-30.091c1.838-3.205 1.2-5.425-1.56-5.425a7.61 7.61 0 0 0-1.865.265A64.328 64.328 0 0 0 67.52 144H17.28a2.017 2.017 0 1 0 0 4H150.72a2.017 2.017 0 1 0 0-4ZM28.001 83.123a60.162 60.162 0 0 1 43.404-57.907 64.271 64.271 0 0 0 64.006 94.855A59.956 59.956 0 0 1 28 83.123Z"
          ></path>
          <path
            fill="#0bceb2"
            d="m13.583 69.011 1.487-1.955-.939-.532-.954 2.19h-.032l-.97-2.175-.955.548 1.471 1.909v.031l-2.3-.297v1.064l2.316-.297v.031l-1.487 1.908.892.564 1.018-2.206h.03l.939 2.19.986-.563-1.502-1.878v-.031l2.362.282V68.73l-2.362.312v-.031zM12.777 8.067l-.857 1.099.514.324.586-1.27h.018l.54 1.261.568-.324-.865-1.082v-.018l1.36.163v-.613l-1.36.18v-.018l.856-1.126-.54-.306-.55 1.261h-.018l-.558-1.253-.551.316.848 1.099v.018l-1.325-.171v.613l1.334-.171v.018zM160 18.713V17.67l-2.317.307v-.031l1.459-1.918-.921-.522-.936 2.148h-.032l-.951-2.133-.937.538 1.443 1.872v.031l-2.256-.292v1.043l2.271-.291v.031l-1.458 1.872.875.553.998-2.165h.03l.921 2.149.967-.552-1.473-1.842v-.031l2.317.276zM107.443 38.036v-.027l1.999.239v-.9l-1.999.264v-.026l1.258-1.655-.794-.45-.808 1.853h-.026l-.821-1.84-.808.464 1.245 1.615v.026l-1.947-.251v.9l1.96-.252v.027l-1.258 1.615.754.477.862-1.867h.025l.795 1.853.834-.476-1.271-1.589zM151.443 44.586l1.258-1.655-.794-.45-.808 1.853h-.026l-.821-1.84-.808.464 1.245 1.615v.026l-1.947-.251v.9l1.96-.252v.027l-1.258 1.615.754.477.862-1.867h.025l.795 1.853.834-.476-1.271-1.589v-.027l1.999.239v-.9l-1.999.264v-.026zM118.154 153h-8.308a2.006 2.006 0 0 0 0 4h8.308a2.006 2.006 0 0 0 0-4zm-60 0h-8.308a2.006 2.006 0 0 0 0 4h8.308a2.006 2.006 0 0 0 0-4zM104 153H64a2 2 0 0 0 0 4h15.94v2H72a2 2 0 0 0 0 4h25a2 2 0 0 0 0-4h-8.94v-2H104a2 2 0 0 0 0-4z"
          ></path>
        </svg>
      ) : (
        <svg
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 20 20"
          fill="currentColor"
          className="h-6 w-6 text-yellow-500"
        >
          <path fillRule="evenodd" d="M10 14a4 4 0 100-8 4 4 0 000 8z" />
          <path
            fillRule="evenodd"
            d="M10 3a1 1 0 011 1v1a1 1 0 11-2 0V4a1 1 0 011-1z"
          />
          <path fillRule="evenodd" d="M10 16a1 1 0 110-2 1 1 0 010 2z" />
          <path
            fillRule="evenodd"
            d="M16.95 10a1 1 0 010 2h-1a1 1 0 110-2h1zM4.05 10a1 1 0 010 2h-1a1 1 0 110-2h1zM16.24 4.76a1 1 0 11-1.41 1.41l-.7-.7a1 1 0 111.41-1.41l.7.7zM5.17 15.83a1 1 0 11-1.41-1.41l.7-.7a1 1 0 111.41 1.41l-.7.7zM16.24 15.24a1 1 0 01-1.41-1.41l.7-.7a1 1 0 111.41 1.41l-.7.7zM5.17 4.17a1 1 0 01-1.41 1.41l-.7-.7a1 1 0 111.41-1.41l.7.7z"
            clipRule="evenodd"
          />
        </svg>
      )}
    </button>
  );
}

export default DarkModeToggle;
